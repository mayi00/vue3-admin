import{ax as e,j as a,k as l,w as t,m as s,ac as d,y as i,D as u,ad as r,ay as o,a5 as m,p as c,H as p,u as n,G as b,ab as f,C as v,a2 as g,r as V,E as y,a8 as _,az as D,c as E}from"./DFilHWvT.js";import{a as x}from"./C762OUmN.js";import{a as h}from"./CxAYDShj.js";const k={__name:"dictDataFormDialog",props:{visible:{type:Boolean,required:!0},isEdit:{type:Boolean,default:!1},dictType:{type:Object,default:()=>({})},dictData:{type:Object,default:()=>({})}},emits:["update:visible","success"],setup(k,{emit:L}){const j=k,w=L,T=V(),U=V({dictLabel:"",dictValue:"",sort:0,status:"ENABLED",remark:""}),q={dictLabel:[{required:!0,message:"请输入字典名称",trigger:"blur"},{min:2,max:20,message:"请输入2-20位字典名称",trigger:"blur"}],dictValue:[{required:!0,message:"请输入字典值",trigger:"blur"},{min:1,max:50,message:"请输入1-50位字典值",trigger:"blur"}],sort:[{required:!0,message:"请输入排序值",trigger:"blur"},{type:"number",message:"请输入数字",trigger:"blur"}]},B=V(!1);e(()=>j.dictData,e=>{j.isEdit&&e&&(U.value=E(e))},{immediate:!0,deep:!0});const C=()=>{T.value?.resetFields(),w("update:visible",!1)},M=async()=>{T.value.validate(async(e,a)=>{if(e)try{const e={...U.value,dictType:j.dictType.dictValue};B.value=!0,j.isEdit?await x.sys.dict.editDictData(e):await x.sys.dict.addDictData(e),y.success((j.isEdit?"编辑":"新增")+"成功"),C(),w("success")}catch(l){console.error("提交表单失败:",l),y.error((j.isEdit?"编辑":"新增")+"失败")}finally{B.value=!1}})};return(e,V)=>{const y=d,E=r,x=o,L=D,j=m,w=f,S=g,A=_;return a(),l(A,{"model-value":k.visible,title:k.isEdit?"编辑":"新增",width:500,onClose:C},{footer:t(()=>[s(S,{type:"primary",loading:B.value,onClick:M},{default:t(()=>[...V[5]||(V[5]=[v("确定",-1)])]),_:1},8,["loading"]),s(S,{onClick:C},{default:t(()=>[...V[6]||(V[6]=[v("取消",-1)])]),_:1})]),default:t(()=>[s(w,{ref_key:"formRef",ref:T,model:U.value,rules:q,"label-width":"80px"},{default:t(()=>[s(y,{label:"字典类型"},{default:t(()=>[i("span",null,u(k.dictType.dictLabel),1)]),_:1}),s(y,{label:"字典名称",prop:"dictLabel"},{default:t(()=>[s(E,{modelValue:U.value.dictLabel,"onUpdate:modelValue":V[0]||(V[0]=e=>U.value.dictLabel=e),modelModifiers:{trim:!0},placeholder:"请输入字典名称",maxlength:"20",clearable:""},null,8,["modelValue"])]),_:1}),s(y,{label:"字典值",prop:"dictValue"},{default:t(()=>[s(E,{modelValue:U.value.dictValue,"onUpdate:modelValue":V[1]||(V[1]=e=>U.value.dictValue=e),modelModifiers:{trim:!0},placeholder:"请输入字典值",maxlength:"50",clearable:""},null,8,["modelValue"])]),_:1}),s(y,{label:"排序",prop:"sort"},{default:t(()=>[s(x,{modelValue:U.value.sort,"onUpdate:modelValue":V[2]||(V[2]=e=>U.value.sort=e),min:1,max:9999,precision:0},null,8,["modelValue"])]),_:1}),s(y,{label:"状态",prop:"status"},{default:t(()=>[s(j,{modelValue:U.value.status,"onUpdate:modelValue":V[3]||(V[3]=e=>U.value.status=e)},{default:t(()=>[(a(!0),c(b,null,p(n(h)("SYS_ENABLED_STATUS"),e=>(a(),l(L,{key:e.dictValue,label:e.dictValue},{default:t(()=>[v(u(e.dictLabel),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(y,{label:"备注",prop:"remark"},{default:t(()=>[s(E,{modelValue:U.value.remark,"onUpdate:modelValue":V[4]||(V[4]=e=>U.value.remark=e),modelModifiers:{trim:!0},type:"textarea",rows:3,placeholder:"请输入备注",maxlength:"200",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["model-value","title"])}}};export{k as default};
