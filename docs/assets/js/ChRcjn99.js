import{ax as e,j as a,k as l,w as t,m as s,ab as d,ac as i,u as r,a5 as o,p as u,H as m,G as c,aa as p,C as n,a2 as b,r as f,E as g,a8 as V,az as y,c as v}from"./OcaL6beW.js";import{a as _}from"./CFdA1usV.js";import{a as E}from"./CxAYDShj.js";const h={__name:"dictTypeFormDialog",props:{visible:{type:Boolean,required:!0},isEdit:{type:Boolean,default:!1},dictTypeData:{type:Object,default:()=>({})}},emits:["update:visible","success"],setup(h,{emit:k}){const x=h,w=k,L=f(),j=f({id:"",dictLabel:"",dictValue:"",status:"",remark:""}),T={dictLabel:[{required:!0,message:"请输入字典类型名称",trigger:"blur"},{min:2,max:20,message:"请输入2-20位字典类型名称",trigger:"blur"}],dictValue:[{required:!0,message:"请输入字典类型值",trigger:"blur"},{pattern:/^[a-zA-Z0-9_]+$/,message:"请输入字母、数字和下划线组成的字典类型值",trigger:"blur"}]},U=f(!1);e(()=>x.dictTypeData,e=>{x.isEdit&&e&&(j.value=v(e))},{immediate:!0,deep:!0});const C=()=>{L.value?.resetFields(),w("update:visible",!1)},D=async()=>{L.value.validate(async e=>{if(e)try{const e={...j.value};U.value=!0,x.isEdit?await _.sys.dict.edit(e):await _.sys.dict.add(e),g.success((x.isEdit?"编辑":"新增")+"成功"),C(),w("success")}catch(a){console.error(a),g.error(`${x.isEdit?"编辑":"新增"}失败：${a.message||"未知错误"}`)}finally{U.value=!1}})};return(e,f)=>{const g=i,v=d,_=y,k=o,x=p,w=b,S=V;return a(),l(S,{"model-value":h.visible,title:h.isEdit?"编辑":"新增",width:500,onClose:C},{footer:t(()=>[s(w,{type:"primary",loading:r(U),onClick:D},{default:t(()=>[...f[4]||(f[4]=[n("确定",-1)])]),_:1},8,["loading"]),s(w,{onClick:C},{default:t(()=>[...f[5]||(f[5]=[n("取消",-1)])]),_:1})]),default:t(()=>[s(x,{ref_key:"formRef",ref:L,model:r(j),rules:T,"label-width":"120px"},{default:t(()=>[s(v,{label:"字典类型名称",prop:"dictLabel"},{default:t(()=>[s(g,{modelValue:r(j).dictLabel,"onUpdate:modelValue":f[0]||(f[0]=e=>r(j).dictLabel=e),modelModifiers:{trim:!0},placeholder:"请输入字典类型名称",maxlength:"20",clearable:""},null,8,["modelValue"])]),_:1}),s(v,{label:"字典类型值",prop:"dictValue"},{default:t(()=>[s(g,{modelValue:r(j).dictValue,"onUpdate:modelValue":f[1]||(f[1]=e=>r(j).dictValue=e),modelModifiers:{trim:!0},disabled:h.isEdit,placeholder:"请输入字典类型值",maxlength:"50",clearable:""},null,8,["modelValue","disabled"])]),_:1}),s(v,{label:"状态",prop:"status"},{default:t(()=>[s(k,{modelValue:r(j).status,"onUpdate:modelValue":f[2]||(f[2]=e=>r(j).status=e)},{default:t(()=>[(a(!0),u(c,null,m(r(E)("SYS_ENABLED_STATUS"),e=>(a(),l(_,{key:e.dictValue,label:e.dictLabel,value:e.dictValue},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),s(v,{label:"备注",prop:"remark"},{default:t(()=>[s(g,{modelValue:r(j).remark,"onUpdate:modelValue":f[3]||(f[3]=e=>r(j).remark=e),modelModifiers:{trim:!0},type:"textarea",autosize:{minRows:2,maxRows:5},placeholder:"请输入备注",maxlength:"200",clearable:""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["model-value","title"])}}};export{h as default};
