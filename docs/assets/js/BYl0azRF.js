import{g as e,j as a,k as t,w as l,u as i,a3 as o,y as r,m as u,a4 as n,a2 as s,C as p,a5 as d,a6 as f,p as m,G as v,H as c,a7 as g,A as y,a8 as b,a9 as h,r as w,x,E as _,X as k,a1 as C}from"./OcaL6beW.js";import{_ as R}from"./CFdA1usV.js";import{_ as j}from"./Ci5orCBq.js";import{u as D}from"./BmeqqqNF.js";const H={class:"cropper-footer"},I=R(Object.assign({name:"HyImageCropper"},{__name:"HyImageCropper",props:{visible:{type:Boolean,default:!1},outputType:{type:String,default:"png"},ratioList:{type:Array,default:()=>[{w:16,h:9},{w:4,h:3}]},enableOriginRatio:{type:Boolean,default:!0},enableFreeRatio:{type:Boolean,default:!0},originRatio:{type:String,default:"free"}},emits:["update:visible","confirm"],setup(k,{emit:C}){const R=k,j=C,D=w(null),I=h({img:"",fixed:!1,fixedNumber:[16,9],key:Date.now()}),N=x(()=>R.ratioList.map(e=>({...e,ratio:`${e.w}:${e.h}`}))),O=w(""),U=e=>{if("origin"===e)return void A();if("free"===e)return I.fixed=!1,void(I.key=Date.now());const[a,t]=e.split(":").map(e=>Number(e));B({w:a,h:t})},A=()=>{const e=new Image;e.src=I.img,e.onload=function(){B({w:e.width,h:e.height})}},B=({w:e,h:a})=>{I.fixed=!0,I.fixedNumber=[e,a],I.key=Date.now()},F=e=>{const a=new FileReader;return a.readAsDataURL(e),a.onload=()=>{I.img=a.result},!1},L=()=>{I.img?D.value.getCropData(e=>{j("confirm",e),V()}):_.warning("请先上传图片")},V=()=>{I.img="",D.value&&D.value.clearCrop()},G=()=>{j("update:visible",!1),V()};return e(()=>{R.originRatio?(O.value=R.originRatio,U(O.value)):N.value.length?(O.value=N.value[0].ratio,U(O.value)):(O.value="free",I.fixed=!1,I.key=Date.now())}),(e,h)=>{const w=s,x=n,_=g,C=d,R=b;return a(),t(R,{"model-value":k.visible,title:"图片裁剪",width:432,onClose:G},{footer:l(()=>[r("div",H,[u(x,{action:"","before-upload":F,"show-file-list":!1,accept:"image/*"},{default:l(()=>[u(w,{type:"primary"},{default:l(()=>[...h[1]||(h[1]=[p("上传图片",-1)])]),_:1})]),_:1}),u(C,{modelValue:i(O),"onUpdate:modelValue":h[0]||(h[0]=e=>f(O)?O.value=e:null),onChange:U},{default:l(()=>[(a(!0),m(v,null,c(i(N),e=>(a(),t(_,{key:e.value,label:e.ratio,value:e.ratio},null,8,["label","value"]))),128)),k.enableOriginRatio?(a(),t(_,{key:0,label:"原图",value:"origin"})):y("",!0),k.enableFreeRatio?(a(),t(_,{key:1,label:"自由裁剪",value:"free"})):y("",!0)]),_:1},8,["modelValue"]),u(w,{type:"primary",onClick:L},{default:l(()=>[...h[2]||(h[2]=[p("保存",-1)])]),_:1})])]),default:l(()=>[(a(),t(i(o),{ref_key:"cropperRef",ref:D,img:i(I).img,"output-type":k.outputType,"auto-crop":!0,"auto-crop-width":800,"auto-crop-height":450,fixed:i(I).fixed,"fixed-number":i(I).fixedNumber,key:i(I).key,class:"cropper"},null,8,["img","output-type","fixed","fixed-number"]))]),_:1},8,["model-value"])}}}),[["__scopeId","data-v-cf310e1d"]]),N={class:"g-container"},O={class:"w-[600px]"},U=Object.assign({name:"Demo"},{__name:"index",setup(e){const{elementHeight:t}=D({offset:67}),o=w(!1);function n(e){o.value=!1}const d=w("");function v(){d.value}return(e,c)=>{const g=j,y=s,b=I,h=C;return a(),m("div",N,[u(h,{shadow:"hover",style:k({height:i(t)+"px"})},{default:l(()=>[r("div",O,[u(g,{value:i(d),"onUpdate:value":c[0]||(c[0]=e=>f(d)?d.value=e:null),placeholder:"请输入通知内容"},null,8,["value"]),u(y,{type:"primary",onClick:v},{default:l(()=>[...c[2]||(c[2]=[p("提交",-1)])]),_:1}),u(b,{visible:i(o),"onUpdate:visible":c[1]||(c[1]=e=>f(o)?o.value=e:null),onConfirm:n},null,8,["visible"])])]),_:1},8,["style"])])}}});export{U as default};
